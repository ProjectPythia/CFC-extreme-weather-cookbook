{"version":2,"kind":"Notebook","sha256":"662b37bb90a33ecb04a58c1eb165451b558566e2559a8b889a1d9db4f2d8f28e","slug":"notebooks.cfc-atm","location":"/notebooks/cfc-atm.ipynb","dependencies":[],"frontmatter":{"title":"Caribbean precipitation extremes using HighResMIP","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Project Pythia Community","given":"Project Pythia","family":"Community"},"name":"Project Pythia Community","url":"https://projectpythia.org/","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/CFC-extreme-weather-cookbook","copyright":"2024","affiliations":[{"id":"University at Albany (State University of New York)","name":"University at Albany (State University of New York)"},{"id":"UCAR/NCAR","name":"UCAR/NCAR"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/CFC-extreme-weather-cookbook/blob/main/notebooks/cfc-atm.ipynb","thumbnail":"/CFC-extreme-weather-cookbook/build/CFC_logo-e788ae3f3ab60e574cd944152856964f.PNG","exports":[{"format":"ipynb","filename":"cfc-atm.ipynb","url":"/CFC-extreme-weather-cookbook/build/cfc-atm-d10f3737c22b05899f0cc2888ca132c7.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"image","url":"/CFC-extreme-weather-cookbook/build/CFC_logo-e788ae3f3ab60e574cd944152856964f.PNG","alt":"<Caribbeans for Climate>","title":"black background with Caribbeans for Climate in green writing","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"sjkfuxW2fW","urlSource":"../CFC_logo.PNG"},{"type":"text","value":"\n","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tDPqG0FXv8"},{"type":"image","url":"/CFC-extreme-weather-cookbook/build/cmip_logo-fbef2586dc010275615257ec2235143e.jpeg","alt":"<CMIP6>","title":"image alt text","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ThLmCaR51T","urlSource":"./images/logos/cmip_logo.jpeg"}],"key":"kngnqDAxkB"}],"key":"RLzop0qb5h"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Caribbean precipitation extremes using HighResMIP","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dUiFKFq94t"}],"identifier":"caribbean-precipitation-extremes-using-highresmip","label":"Caribbean precipitation extremes using HighResMIP","html_id":"caribbean-precipitation-extremes-using-highresmip","implicit":true,"key":"rurn1q1wQ1"}],"key":"UgcxiMMWXT"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aVb8khD6UE"}],"key":"k3gx2Tymdi"},{"type":"block","kind":"notebook-content","data":{"jp-MarkdownHeadingCollapsed":true},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SITgwKgymQ"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"IguglKMDix"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In this notebook, we’ll do the following:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RZ8MBxc7hj"}],"key":"LOgn8mFIfP"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Learn how to make subregional-scale plots with the CMIP6 model output","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"anZmDU70KV"}],"key":"cHLwz54QLa"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Plot spatial trends in summertime environmental variables","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nuSHG0yNRm"}],"key":"f5eNIiAxjj"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Calculate the genesis potential index (GPI), an indicator of environmental favorability for tropical cyclogenesis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lCKHp8cepM"}],"key":"gKt7bSsfyV"}],"key":"HBPcJFiDRy"}],"key":"ZtOXJA2mEo"},{"type":"block","kind":"notebook-content","data":{"jp-MarkdownHeadingCollapsed":true},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W49LEl1ijF"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"PZJyIisQcE"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iuTdUr58gC"}],"key":"Gcu95b7vij"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NqrdqMP5un"}],"key":"f6hrvKVKT4"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"l61yJH0uH7"}],"key":"WEmXtfVhUp"}],"key":"VNIO70TX7p"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/cartopy/cartopy.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to Cartopy","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ArlPpHQ0Yu"}],"urlSource":"https://foundations.projectpythia.org/core/cartopy/cartopy.html","key":"vZlbOBM819"}],"key":"tu3Tsi3RXD"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gjOEEk8XWl"}],"key":"YFsXPmO5Ey"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[],"key":"HBNxtssm0S"}],"key":"kIM0jiHAR6"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://projectpythia.org/cmip6-cookbook/notebooks/foundations/intake-esm.html","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Load CMIP6 data with Intake-ESM","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"C3hhkhe5Fn"}],"urlSource":"https://projectpythia.org/cmip6-cookbook/notebooks/foundations/intake-esm.html","key":"peof2IrRDC"}],"key":"tdN72ANQ2m"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"A8dnsvAKUi"}],"key":"u1QRvwjxLe"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[],"key":"QfKGlMPSNq"}],"key":"T56Tp8NJiD"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/xarray.html","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Intro to Xarray","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WDnEQhcUZ1"}],"urlSource":"https://foundations.projectpythia.org/core/xarray.html","key":"PjCCMaEXzZ"}],"key":"zW0LojHtJt"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"id8ORnRGlA"}],"key":"DPIZcwmRBL"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[],"key":"Q6GEqdNIXn"}],"key":"QKEUOIH9tQ"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/xarray/dask-arrays-xarray.html","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Dask arrays with Xarray","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xdFfroIEg4"}],"urlSource":"https://foundations.projectpythia.org/core/xarray/dask-arrays-xarray.html","key":"fk8gVSdHYW"}],"key":"ylAgvfrG4F"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"GFToGwTLIY"}],"key":"yLqbqNK55V"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[],"key":"emi2on2v9j"}],"key":"aFbcyiYEDy"}],"key":"xYNw8hOSZ8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"c1BO2o1MET"}],"key":"XSWNtXV5Eg"},{"type":"text","value":": 30 minutes.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"L6fVbs9PEc"}],"key":"mi3RtyRD2x"}],"key":"QqsJX1TfMB"}],"key":"VeDqePayPh"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jxFZzFw7Hq"}],"key":"qUMCU3i5mT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Installs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Kp9m08Jaqe"}],"identifier":"installs","label":"Installs","html_id":"installs","implicit":true,"key":"NHQygSht4v"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Before you start, install the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kP4EiDIyZA"},{"type":"link","url":"https://github.com/jbusecke/xMIP","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"xMIP","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HYWe63vouA"}],"urlSource":"https://github.com/jbusecke/xMIP","error":true,"key":"Phzf5AAhL2"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Mma70q56q0"},{"type":"link","url":"https://regionmask.readthedocs.io/en/stable/index.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"regionmask","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bH16tGzrAo"}],"urlSource":"https://regionmask.readthedocs.io/en/stable/index.html","key":"tyiIeAjCsX"},{"type":"text","value":", and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"X4hrC6oocc"},{"type":"link","url":"https://github.com/dgilford/tcpyPI/tree/master","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"tcpyPI","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Fj4mZzlK8w"}],"urlSource":"https://github.com/dgilford/tcpyPI/tree/master","error":true,"key":"oJbP9xiUiy"},{"type":"text","value":" packages. These packages allow us to mask and handle the bulky CMIP6 model output with ease. ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cadpe93Ao3"},{"type":"inlineCode","value":"tcpyPI","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VYU6JVIxgq"},{"type":"text","value":" helps us calculate the potential intensity of storms given certain environmental conditions. Remove ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"elDueBxkFK"},{"type":"inlineCode","value":"-q","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ujv2ypR6kh"},{"type":"text","value":" below for ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"a4n4ccUsxP"},{"type":"inlineCode","value":"pip install","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wE9FToiZhJ"},{"type":"text","value":" output.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pDWP2dADvz"}],"key":"b8l3wlJAYV"}],"key":"ga6CYlUcPg"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"# !pip install -q git+https://github.com/jbusecke/xmip.git","key":"n6xZ3fbMQu"},{"type":"output","id":"Tc_-p3L_y6YA1Hr13rP4l","data":[],"key":"c7do2kTYG9"}],"key":"gWRYakE4QN"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"# !pip install -q regionmask==0.12.1","key":"lEpUXCsHTr"},{"type":"output","id":"OjQ8O_zeYOOGYF4gpUUc5","data":[],"key":"VlRuyfPOVV"}],"key":"VCuIyDruEB"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"# !pip install -q tcpypi","key":"dyvfkNpHAo"},{"type":"output","id":"FxgFovg1UK6CWE6N-9b4y","data":[],"key":"N3yoal5nC3"}],"key":"FtpeN249Au"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p1fhfNKs2m"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"FleNvErJHn"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Begin your body of content with another ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"u0g0PKLtmD"},{"type":"inlineCode","value":"---","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wMBvFYCTdp"},{"type":"text","value":" divider before continuing into this section, then remove this body text and populate the following code cell with all necessary Python imports ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hFcP4j5ipn"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"up-front","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YkzDgqDRu0"}],"key":"iNyJw7mfs5"},{"type":"text","value":":","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"w3LBXVaqYy"}],"key":"VEkyGLg0pL"}],"key":"CFYqeokj1q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%matplotlib inline\nfrom matplotlib import pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport xarray as xr\nimport regionmask\nimport intake\nimport xesmf as xe\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nfrom cartopy.mpl.gridliner import LONGITUDE_FORMATTER, LATITUDE_FORMATTER\nfrom xmip.preprocessing import combined_preprocessing\nfrom xmip.regionmask import merged_mask\nfrom xgcm import Grid\nimport xgcm \nfrom xgcm.autogenerate import generate_grid_ds\n\nfrom cartopy.mpl.geoaxes import GeoAxes\nimport matplotlib.ticker as mticker\n\nplt.rcParams['figure.figsize'] = 12, 6\nplt.rcParams['figure.titlesize'] = 15\nplt.rcParams[\"axes.titlesize\"] = 15","key":"GUGRm3b4Gk"},{"type":"output","id":"6SLzCcD4DEtiQ-j_yR_48","data":[],"key":"H5S5n4KSxz"}],"key":"WVYriCST8V"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Initiating compute cluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NuagBUAmYE"}],"identifier":"initiating-compute-cluster","label":"Initiating compute cluster","html_id":"initiating-compute-cluster","implicit":true,"key":"TviJZbE6Zw"}],"key":"Zd4vfLFmvF"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport sys\nfrom dask_gateway import Gateway\nfrom dask.distributed import Client\n\n\nplatform = sys.platform\n\nif (platform == 'win32'):\n    import multiprocessing.popen_spawn_win32\nelse:\n    import multiprocessing.popen_spawn_posix","key":"YrPy83YaLK"},{"type":"output","id":"IzNH1DFQzjjp0FqnKq3CJ","data":[],"key":"aeN7z1Iyrj"}],"key":"dCMIYZWcRw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"client = Client()\nclient","key":"CQOLsFwBwe"},{"type":"output","id":"luOm-k5jR20pubEl9o8bO","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/cookbook-dev/lib/python3.13/site-packages/distributed/node.py:187: UserWarning: Port 8787 is already in use.\nPerhaps you already have a cluster running?\nHosting the HTTP server on port 44953 instead\n  warnings.warn(\n"},{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"<Client: 'tcp://127.0.0.1:35373' processes=4 threads=4, memory=15.62 GiB>","content_type":"text/plain"},"text/html":{"content":"<div>\n    <div style=\"width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;\"> </div>\n    <div style=\"margin-left: 48px;\">\n        <h3 style=\"margin-bottom: 0px;\">Client</h3>\n        <p style=\"color: #9D9D9D; margin-bottom: 0px;\">Client-929f55c1-5160-11f0-8f6f-7c1e52f925fb</p>\n        <table style=\"width: 100%; text-align: left;\">\n\n        <tr>\n        \n            <td style=\"text-align: left;\"><strong>Connection method:</strong> Cluster object</td>\n            <td style=\"text-align: left;\"><strong>Cluster type:</strong> distributed.LocalCluster</td>\n        \n        </tr>\n\n        \n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:44953/status\" target=\"_blank\">http://127.0.0.1:44953/status</a>\n                </td>\n                <td style=\"text-align: left;\"></td>\n            </tr>\n        \n\n        </table>\n\n        \n\n        \n            <details>\n            <summary style=\"margin-bottom: 20px;\"><h3 style=\"display: inline;\">Cluster Info</h3></summary>\n            <div class=\"jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output\">\n    <div style=\"width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;\">\n    </div>\n    <div style=\"margin-left: 48px;\">\n        <h3 style=\"margin-bottom: 0px; margin-top: 0px;\">LocalCluster</h3>\n        <p style=\"color: #9D9D9D; margin-bottom: 0px;\">d9446aee</p>\n        <table style=\"width: 100%; text-align: left;\">\n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Dashboard:</strong> <a href=\"http://127.0.0.1:44953/status\" target=\"_blank\">http://127.0.0.1:44953/status</a>\n                </td>\n                <td style=\"text-align: left;\">\n                    <strong>Workers:</strong> 4\n                </td>\n            </tr>\n            <tr>\n                <td style=\"text-align: left;\">\n                    <strong>Total threads:</strong> 4\n                </td>\n                <td style=\"text-align: left;\">\n                    <strong>Total memory:</strong> 15.62 GiB\n                </td>\n            </tr>\n            \n            <tr>\n    <td style=\"text-align: left;\"><strong>Status:</strong> running</td>\n    <td style=\"text-align: left;\"><strong>Using processes:</strong> True</td>\n</tr>\n\n            \n        </table>\n\n        <details>\n            <summary style=\"margin-bottom: 20px;\">\n                <h3 style=\"display: inline;\">Scheduler Info</h3>\n            </summary>\n\n            <div style=\"\">\n    <div>\n        <div style=\"width: 24px; height: 24px; background-color: #FFF7E5; border: 3px solid #FF6132; border-radius: 5px; position: absolute;\"> </div>\n        <div style=\"margin-left: 48px;\">\n            <h3 style=\"margin-bottom: 0px;\">Scheduler</h3>\n            <p style=\"color: #9D9D9D; margin-bottom: 0px;\">Scheduler-fc54336c-fb4f-4bb7-a457-c209eb3a1bc0</p>\n            <table style=\"width: 100%; text-align: left;\">\n                <tr>\n                    <td style=\"text-align: left;\">\n                        <strong>Comm:</strong> tcp://127.0.0.1:35373\n                    </td>\n                    <td style=\"text-align: left;\">\n                        <strong>Workers:</strong> 0 \n                    </td>\n                </tr>\n                <tr>\n                    <td style=\"text-align: left;\">\n                        <strong>Dashboard:</strong> <a href=\"http://127.0.0.1:44953/status\" target=\"_blank\">http://127.0.0.1:44953/status</a>\n                    </td>\n                    <td style=\"text-align: left;\">\n                        <strong>Total threads:</strong> 0\n                    </td>\n                </tr>\n                <tr>\n                    <td style=\"text-align: left;\">\n                        <strong>Started:</strong> Just now\n                    </td>\n                    <td style=\"text-align: left;\">\n                        <strong>Total memory:</strong> 0 B\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n    <details style=\"margin-left: 48px;\">\n        <summary style=\"margin-bottom: 20px;\">\n            <h3 style=\"display: inline;\">Workers</h3>\n        </summary>\n\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 0</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:40511\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 1\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:38939/status\" target=\"_blank\">http://127.0.0.1:38939/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 3.91 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:45073\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-x_bk5io8\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 1</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:33793\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 1\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:35759/status\" target=\"_blank\">http://127.0.0.1:35759/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 3.91 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:33259\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-liiixse9\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 2</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:41317\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 1\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:35165/status\" target=\"_blank\">http://127.0.0.1:35165/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 3.91 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:41643\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-7gig7ukv\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n        <div style=\"margin-bottom: 20px;\">\n            <div style=\"width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;\"> </div>\n            <div style=\"margin-left: 48px;\">\n            <details>\n                <summary>\n                    <h4 style=\"margin-bottom: 0px; display: inline;\">Worker: 3</h4>\n                </summary>\n                <table style=\"width: 100%; text-align: left;\">\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Comm: </strong> tcp://127.0.0.1:33921\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Total threads: </strong> 1\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Dashboard: </strong> <a href=\"http://127.0.0.1:42745/status\" target=\"_blank\">http://127.0.0.1:42745/status</a>\n                        </td>\n                        <td style=\"text-align: left;\">\n                            <strong>Memory: </strong> 3.91 GiB\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: left;\">\n                            <strong>Nanny: </strong> tcp://127.0.0.1:36861\n                        </td>\n                        <td style=\"text-align: left;\"></td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\" style=\"text-align: left;\">\n                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-ck40rl_g\n                        </td>\n                    </tr>\n\n                    \n\n                    \n\n                </table>\n            </details>\n            </div>\n        </div>\n        \n\n    </details>\n</div>\n\n        </details>\n    </div>\n</div>\n            </details>\n        \n\n    </div>\n</div>","content_type":"text/html"}}}],"key":"NCOQZEYv3l"}],"key":"tXK8vQ6Gs4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Once you initiate your ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ryOtIYktfu"},{"type":"inlineCode","value":"Client","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u041sA8ybw"},{"type":"text","value":", navigate to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v8kES4Q5HL"},{"type":"inlineCode","value":"Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RvI9sO7CxO"},{"type":"image","url":"/CFC-extreme-weather-cookbook/build/dask_icon_v2-658171ba1b980532bcd96edb0f05fb4e.ico","alt":"<Dask>","title":"Dask logo","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Rn6Rn6VQ3r","urlSource":"dask_icon_v2.ico"},{"type":"text","value":" tab in the far-left sidebar or click the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TgQfMKmGS3"},{"type":"inlineCode","value":"Launch dashboard in JupyterLab","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nETLl8EYUz"},{"type":"text","value":" button above. In the search bar at the top, input your cluster’s url. Then, replace ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uLAtcQbR8m"},{"type":"inlineCode","value":"https://127.0.0.1:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DXhteWFD5b"},{"type":"text","value":" with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GFkDmKcqiR"},{"type":"inlineCode","value":"/proxy/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"i9Myv7EGai"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yGg680EMri"}],"key":"hOlnCcFZZP"}],"key":"aAbqUwsbzK"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load the CMIP6 HighResMIP data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tgYFDSdblB"}],"identifier":"load-the-cmip6-highresmip-data","label":"Load the CMIP6 HighResMIP data","html_id":"load-the-cmip6-highresmip-data","implicit":true,"key":"xsblac2vjs"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Since we’re ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kuQiiG0g3H"},{"type":"text","value":"examining precipitation extremes at regional scales","key":"ZgO9stJgMx"},{"type":"text","value":", it’s good to use the highest resolution data available. In this notebook, we’ll use the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CtetCVVWYa"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"HighResMIP experiments","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jwbono9pHF"}],"key":"D9PzeUcJke"},{"type":"text","value":", that provide a relatively higher resolution than the CMIP6 data. In this section, we’ll choose one global climate model (as an example, NOAA GFDL’s GFDL-CM4C192 model) for our analyses. We’ll grab the following environmental variables:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jRq4L4RKLR"}],"key":"XgYGgPV80s"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Omega (wap)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"GN9bucvy4F"}],"key":"LpNMWDCt5l"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Convective precipitation (prc)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DnF7k6hsuy"}],"key":"MUqgDUE4p4"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Mean sea-level pressure (psl)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"MXsON3OLQn"}],"key":"M6rOiYTFUz"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Eastward, Meridional (horizontal) winds (ua, va)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pHq1EUe9oC"}],"key":"YERSQoH8kX"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Relative humidity (hur)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yUQztLZapF"}],"key":"xyaDGBMPop"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Specific humidity (hus)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Bj8p4oBRos"}],"key":"KeHwOr5vDU"}],"key":"K8NpkpEET5"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Below, we’re using ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"SP9fzqUMNm"},{"type":"inlineCode","value":"Intake-ESM","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ZzmjWyyBo2"},{"type":"text","value":" to grab the model, experiments, and variables we want. ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"U5Tw2om2M3"},{"type":"inlineCode","value":"Intake-ESM","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MWwPsRvcjA"},{"type":"text","value":" packages all of our data into two datasets (by experiment).","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"YMnGgbO3Z9"}],"key":"DZnXgO9X7K"}],"key":"U8CIWhIgYG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat_url = \"https://storage.googleapis.com/cmip6/pangeo-cmip6.json\"\ncol = intake.open_esm_datastore(cat_url)\ncol","key":"Q7k7a7cY30"},{"type":"output","id":"TJH8fORspf6jRDF1TFg1f","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"<p><strong>pangeo-cmip6 catalog with 7674 dataset(s) from 514818 asset(s)</strong>:</p> <div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unique</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>activity_id</th>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>institution_id</th>\n      <td>36</td>\n    </tr>\n    <tr>\n      <th>source_id</th>\n      <td>88</td>\n    </tr>\n    <tr>\n      <th>experiment_id</th>\n      <td>170</td>\n    </tr>\n    <tr>\n      <th>member_id</th>\n      <td>657</td>\n    </tr>\n    <tr>\n      <th>table_id</th>\n      <td>37</td>\n    </tr>\n    <tr>\n      <th>variable_id</th>\n      <td>700</td>\n    </tr>\n    <tr>\n      <th>grid_label</th>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>zstore</th>\n      <td>514818</td>\n    </tr>\n    <tr>\n      <th>dcpp_init_year</th>\n      <td>60</td>\n    </tr>\n    <tr>\n      <th>version</th>\n      <td>736</td>\n    </tr>\n    <tr>\n      <th>derived_variable_id</th>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"pBBjbK6KN3"}],"key":"M3zZXTZNen"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Use the column headers above to refine your catalog search. Here’s a handy ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RizPgprsYu"},{"type":"link","url":"https://docs.google.com/document/d/1yUx6jr9EdedCOLd--CPdTfGDwEwzPpCF6p1jRmqx-0Q/edit?usp=sharing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"list of CMIP6 experiments and variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QEWoNOkU3H"}],"urlSource":"https://docs.google.com/document/d/1yUx6jr9EdedCOLd--CPdTfGDwEwzPpCF6p1jRmqx-0Q/edit?usp=sharing","key":"nVpAcZloKI"},{"type":"text","value":" to help your search.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YE2V9N3yWu"}],"key":"ivKQqtKOrv"}],"key":"pG58JkwuQM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cat = col.search(activity_id='HighResMIP', \n                 institution_id='NOAA-GFDL', \n                 experiment_id=['highresSST-present', 'highresSST-future'],\n                 table_id='Amon',\n                 variable_id=['psl', 'tas', 'wap', 'prc', 'hur', 'ua', 'va', 'hus'])\n\ncat.df","key":"vMw4EmuHUM"},{"type":"output","id":"flPkCoC5g6CpKWuPzmW7-","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"   activity_id institution_id     source_id       experiment_id member_id  \\\n0   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n1   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n2   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n3   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n4   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n5   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n6   HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n7   HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n8   HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n9   HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n10  HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n11  HighResMIP      NOAA-GFDL  GFDL-CM4C192   highresSST-future  r1i1p1f1   \n12  HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n13  HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n14  HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n15  HighResMIP      NOAA-GFDL  GFDL-CM4C192  highresSST-present  r1i1p1f1   \n\n   table_id variable_id grid_label  \\\n0      Amon         wap        gr3   \n1      Amon          ua        gr3   \n2      Amon         psl        gr3   \n3      Amon         prc        gr3   \n4      Amon         hus        gr3   \n5      Amon         hur        gr3   \n6      Amon          va        gr3   \n7      Amon         prc        gr3   \n8      Amon         hus        gr3   \n9      Amon         hur        gr3   \n10     Amon         tas        gr3   \n11     Amon         tas        gr3   \n12     Amon         psl        gr3   \n13     Amon          ua        gr3   \n14     Amon          va        gr3   \n15     Amon         wap        gr3   \n\n                                               zstore  dcpp_init_year  \\\n0   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n1   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n2   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n3   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n4   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n5   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n6   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n7   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n8   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n9   gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n10  gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n11  gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n12  gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n13  gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n14  gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n15  gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...             NaN   \n\n     version  \n0   20180701  \n1   20180701  \n2   20180701  \n3   20180701  \n4   20180701  \n5   20180701  \n6   20180701  \n7   20180701  \n8   20180701  \n9   20180701  \n10  20180701  \n11  20180701  \n12  20180701  \n13  20180701  \n14  20180701  \n15  20180701  ","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>activity_id</th>\n      <th>institution_id</th>\n      <th>source_id</th>\n      <th>experiment_id</th>\n      <th>member_id</th>\n      <th>table_id</th>\n      <th>variable_id</th>\n      <th>grid_label</th>\n      <th>zstore</th>\n      <th>dcpp_init_year</th>\n      <th>version</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>wap</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>ua</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>psl</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>prc</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>hus</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>hur</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>va</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>prc</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>hus</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>hur</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>tas</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-future</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>tas</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>psl</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>ua</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>va</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>HighResMIP</td>\n      <td>NOAA-GFDL</td>\n      <td>GFDL-CM4C192</td>\n      <td>highresSST-present</td>\n      <td>r1i1p1f1</td>\n      <td>Amon</td>\n      <td>wap</td>\n      <td>gr3</td>\n      <td>gs://cmip6/CMIP6/HighResMIP/NOAA-GFDL/GFDL-CM4...</td>\n      <td>NaN</td>\n      <td>20180701</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"DLOsvuilKo"}],"key":"PDZX7rw78T"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dset_dict = cat.to_dataset_dict(zarr_kwargs={'consolidated': True})\nlist(dset_dict.keys())","key":"yLwsmFztxp"},{"type":"output","id":"LNGbhVH-r4LiiAuaPNwyC","data":[{"output_type":"stream","name":"stdout","text":"\n--> The keys in the returned dictionary of datasets are constructed as follows:\n\t'activity_id.institution_id.source_id.experiment_id.table_id.grid_label'\n"},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"\n<style>\n    /* Turns off some styling */\n    progress {\n        /* gets rid of default border in Firefox and Opera. */\n        border: none;\n        /* Needs to be in here for Safari polyfill so background images work as expected. */\n        background-size: auto;\n    }\n    progress:not([value]), progress:not([value])::-webkit-progress-bar {\n        background: repeating-linear-gradient(45deg, #7e7e7e, #7e7e7e 10px, #5c5c5c 10px, #5c5c5c 20px);\n    }\n    .progress-bar-interrupted, .progress-bar-interrupted::-webkit-progress-bar {\n        background: #F44336;\n    }\n</style>\n","content_type":"text/html"}}},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"\n    <div>\n      <progress value='0' class='' max='2' style='width:300px; height:20px; vertical-align: middle;'></progress>\n      \n    </div>\n    ","content_type":"text/html"}}},{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"['HighResMIP.NOAA-GFDL.GFDL-CM4C192.highresSST-future.Amon.gr3',\n 'HighResMIP.NOAA-GFDL.GFDL-CM4C192.highresSST-present.Amon.gr3']","content_type":"text/plain"}}}],"key":"OkJHLP1Y1a"}],"key":"xAJBfb4tfG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We’ll consolidate our catalog into two datasets, then merge with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wySsrt2ujD"},{"type":"inlineCode","value":"xarray.concat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n8XpT8On3s"},{"type":"text","value":" to create a larger dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zFljlKz1bB"}],"key":"cBidgxH8OF"}],"key":"yIXUzMgibG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsPRES = dset_dict['HighResMIP.NOAA-GFDL.GFDL-CM4C192.highresSST-present.Amon.gr3'].squeeze()\ndsFUT = dset_dict['HighResMIP.NOAA-GFDL.GFDL-CM4C192.highresSST-future.Amon.gr3'].squeeze()\ndsFULL = xr.concat([dsPRES, dsFUT], dim=\"time\")\ndsFULL","key":"MQrAgv0QRY"},{"type":"output","id":"A__v7JEVJEgi8yi2JXv2n","data":[{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 99GB\nDimensions:         (time: 1212, lat: 360, lon: 576, plev: 19, bnds: 2)\nCoordinates:\n  * bnds            (bnds) float64 16B 1.0 2.0\n  * lat             (lat) float64 3kB -89.75 -89.25 -88.75 ... 88.75 89.25 89.75\n    lat_bnds        (lat, bnds) float64 6kB -90.0 -89.5 -89.5 ... 89.5 89.5 90.0\n  * lon             (lon) float64 5kB 0.3125 0.9375 1.562 ... 358.4 359.1 359.7\n    lon_bnds        (lon, bnds) float64 9kB 0.0 0.625 0.625 ... 359.4 360.0\n  * time            (time) object 10kB 1950-01-16 12:00:00 ... 2050-12-16 12:...\n    time_bnds       (time, bnds) object 19kB dask.array<chunksize=(780, 2), meta=np.ndarray>\n    member_id       <U8 32B 'r1i1p1f1'\n    dcpp_init_year  float64 8B nan\n  * plev            (plev) float64 152B 1e+05 9.25e+04 8.5e+04 ... 500.0 100.0\n    height          float64 8B 2.0\nData variables:\n    prc             (time, lat, lon) float32 1GB dask.array<chunksize=(85, 360, 576), meta=np.ndarray>\n    hus             (time, plev, lat, lon) float32 19GB dask.array<chunksize=(5, 19, 360, 576), meta=np.ndarray>\n    hur             (time, plev, lat, lon) float32 19GB dask.array<chunksize=(5, 19, 360, 576), meta=np.ndarray>\n    tas             (time, lat, lon) float32 1GB dask.array<chunksize=(112, 360, 576), meta=np.ndarray>\n    psl             (time, lat, lon) float32 1GB dask.array<chunksize=(131, 360, 576), meta=np.ndarray>\n    ua              (time, plev, lat, lon) float32 19GB dask.array<chunksize=(4, 19, 360, 576), meta=np.ndarray>\n    va              (time, plev, lat, lon) float32 19GB dask.array<chunksize=(4, 19, 360, 576), meta=np.ndarray>\n    wap             (time, plev, lat, lon) float32 19GB dask.array<chunksize=(4, 19, 360, 576), meta=np.ndarray>\nAttributes: (12/51)\n    Conventions:                      CF-1.7 CMIP-6.0 UGRID-1.0\n    activity_id:                      HighResMIP\n    branch_method:                    none provided\n    branch_time_in_child:             0.0\n    comment:                          <null ref>\n    contact:                          gfdl.climate.model.info@noaa.gov\n    ...                               ...\n    intake_esm_attrs:member_id:       r1i1p1f1\n    intake_esm_attrs:table_id:        Amon\n    intake_esm_attrs:grid_label:      gr3\n    intake_esm_attrs:version:         20180701\n    intake_esm_attrs:_data_format_:   zarr\n    intake_esm_dataset_key:           HighResMIP.NOAA-GFDL.GFDL-CM4C192.highr...","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"491b6e70c647f7100b026d7d3ea0de92","path":"/CFC-extreme-weather-cookbook/build/491b6e70c647f7100b026d7d3ea0de92.html"}}}],"key":"DFqSjyV3RM"}],"key":"qX4PeuiSIT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The global warming trend and spatial trend maps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UmF45U5pdX"}],"identifier":"the-global-warming-trend-and-spatial-trend-maps","label":"The global warming trend and spatial trend maps","html_id":"the-global-warming-trend-and-spatial-trend-maps","implicit":true,"key":"LvzXOyTtXU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We understand that the Earth is warming from increasing linear trends in global mean surface temperatures. But, not everywhere warms at the same rate. This is known as the pattern effect, and it results in more complex global and regional climate change impacts. Using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"koQoAwBdOL"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RIi2cTAg0I"},{"type":"text","value":", we can find the linear trend at each gridpoint in our data.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bsqPQKHdny"}],"key":"GCaubyC5Kf"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s calculate the trend in precipitation across the Caribbean for our GCM.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PlUA6LWMQb"}],"key":"nWEXMXpyIc"}],"key":"AfbodtmiV2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.gridspec as gridspec\nfrom cartopy.mpl.ticker import LatitudeFormatter, LongitudeFormatter\n\n# Calculate the global mean time series and linear trend from surface air temperatures\nregional_mean = dsFULL.prc.sel(time=dsFULL.time.dt.month.isin([8,9,10]), lat=slice(10, 30), lon=slice(260, 310)).mean(['lat', 'lon'])\nregional_anom = regional_mean.groupby('time.month') - regional_mean.groupby('time.month').mean('time')\nregional_anom = regional_anom*1e4\n\n# Use numpy lstsq to find linear trend\nx = np.arange(0, regional_anom.time.shape[0])\nA = np.vstack([x, np.ones(len(x))]).T\n\n# Calculate the least squares fit\nm, c = np.linalg.lstsq(A, regional_anom.values, rcond=None)[0]\nprc_linear = m*x + c\n\n# Calculate the linear trend at each grid point\nda = dsFULL.prc.sel(time=dsFULL.time.dt.month.isin([8,9,10]), lat=slice(10, 30), lon=slice(260, 310)).groupby('time.year').mean('time')*1e4\nres = da.polyfit(dim=\"year\", deg=1)","key":"kh5CcCvBl2"},{"type":"output","id":"4BZ7nGoEeq-6SwpzCOEwi","data":[],"key":"OnkbbG4ir2"}],"key":"zCVOUtAh1j"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot results\nfig = plt.figure(figsize=(12,10), dpi=200)\n\ngs = gridspec.GridSpec(2, 4, height_ratios=[0.35, 0.65], hspace=-0.01) \n\nax1= fig.add_subplot(gs[0, 0:3])\nax2 = fig.add_subplot(gs[1:2, 0:3], projection=ccrs.PlateCarree())\n\n# First subplot\nregional_anom.plot(ax=ax1, linewidth=1, color='black')\nax1.plot(regional_anom.time, prc_linear, color='red')\nax1.set_title('Regional mean Precipitation over the Caribbean')\n\n# Second subplot\nax2.set_extent([-100, -50, 10, 30], crs=ccrs.PlateCarree())\nax2.add_feature(cfeature.LAND, zorder=2, facecolor='None', edgecolor='black')\n\nax2.set_xticks(np.arange(-100, -50, 20), crs=ccrs.PlateCarree())\nax2.set_yticks(np.arange(10, 35, 5), crs=ccrs.PlateCarree())\nlon_formatter = LongitudeFormatter(zero_direction_label=True)\nlat_formatter = LatitudeFormatter()\nax2.xaxis.set_major_formatter(lon_formatter)\nax2.yaxis.set_major_formatter(lat_formatter)\n\nfc = res.polyfit_coefficients.sel(degree=1).plot(ax=ax2, cmap=plt.cm.BrBG, extend='both', add_colorbar=False)\nax2.set_title('Linear trend (i.e. slope) from 1950-2050 at each gridpoint')\n\ncax1 = fig.add_axes([0.73, 0.235, 0.02, 0.25])\ncbar = fig.colorbar(fc, cax=cax1, extend='both')\n","key":"vlQ64NQO2H"},{"type":"output","id":"TCpyiLvNResRMLm-xNIUs","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/cookbook-dev/lib/python3.13/site-packages/cartopy/io/__init__.py:241: DownloadWarning: Downloading: https://naturalearth.s3.amazonaws.com/50m_physical/ne_50m_land.zip\n  warnings.warn(f'Downloading: {url}', DownloadWarning)\n"},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 2400x2000 with 3 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"b7045ff1102194b6ca095990b09a1527","path":"/CFC-extreme-weather-cookbook/build/b7045ff1102194b6ca095990b09a1527.png"}}}],"key":"dCMVtbffQf"}],"key":"UDjitliDep"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In our model, the Gulf of Mexico and western Caribbean regions experiences more drying relative to the eastern Caribbean. Another useful field to examine is the 500-hPa omega (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B4ed8Cur73"},{"type":"inlineMath","value":"\\omega500","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mn>500</mn></mrow><annotation encoding=\"application/x-tex\">\\omega500</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord\">500</span></span></span></span>","key":"N08uzAzOqu"},{"type":"text","value":" field, that tells us where deep convection occurs. Let’s rerun the cells above to examine ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OtFTHxAWhe"},{"type":"inlineMath","value":"\\omega500","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mn>500</mn></mrow><annotation encoding=\"application/x-tex\">\\omega500</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord\">500</span></span></span></span>","key":"hbcogVMfxV"},{"type":"text","value":" trends. Note that, in contrast to precipitation, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ifxRHZjBR2"},{"type":"inlineMath","value":"\\omega500","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mn>500</mn></mrow><annotation encoding=\"application/x-tex\">\\omega500</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord\">500</span></span></span></span>","key":"mZWGAeRh9b"},{"type":"text","value":" is negative for upward motion (convective activity) and positive to downward motion (no convective activity).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n1Lr4FLMFx"}],"key":"pVqTM1chnE"}],"key":"kIj70iPBEu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Calculate the global mean time series and linear trend from surface air temperatures\nregional_mean = dsFULL.wap.sel(time=dsFULL.time.dt.month.isin([8,9,10]), lat=slice(10, 30), lon=slice(260, 310), plev=500*100).mean(['lat', 'lon'])\nregional_anom = regional_mean.groupby('time.month') - regional_mean.groupby('time.month').mean('time')\nregional_anom = regional_anom*1e2\n\n# Use numpy lstsq to find linear trend\nx = np.arange(0, regional_anom.time.shape[0])\nA = np.vstack([x, np.ones(len(x))]).T\n\n# Calculate the least squares fit\nm, c = np.linalg.lstsq(A, regional_anom.values, rcond=None)[0]\nprc_linear = m*x + c\n\n# Calculate the linear trend at each grid point\nda = dsFULL.wap.sel(time=dsFULL.time.dt.month.isin([8,9,10]), lat=slice(10, 30), lon=slice(260, 310), plev=500*100).groupby('time.year').mean('time')*1e2\nres = da.polyfit(dim=\"year\", deg=1)","key":"QkWSe4KjLs"},{"type":"output","id":"4cX2w0C6tYrKMn4J3jrVR","data":[],"key":"HTVDyTkzKk"}],"key":"jXS4CZ3RMj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot results\nfig = plt.figure(figsize=(12,10), dpi=200)\n\ngs = gridspec.GridSpec(2, 4, height_ratios=[0.35, 0.65], hspace=-0.02) \n\nax1= fig.add_subplot(gs[0, 0:3])\nax2 = fig.add_subplot(gs[1:2, 0:3], projection=ccrs.PlateCarree())\n\n# First subplot\nregional_anom.plot(ax=ax1, linewidth=1, color='black')\nax1.plot(regional_anom.time, prc_linear, color='red')\nax1.set_title('Regional mean Omega over the Caribbean')\n\n# Second subplot\nax2.set_extent([-100, -50, 10, 30], crs=ccrs.PlateCarree())\nax2.add_feature(cfeature.LAND, zorder=2, facecolor='None', edgecolor='black')\n\nax2.set_xticks(np.arange(-100, -50, 20), crs=ccrs.PlateCarree())\nax2.set_yticks(np.arange(10, 35, 5), crs=ccrs.PlateCarree())\nlon_formatter = LongitudeFormatter(zero_direction_label=True)\nlat_formatter = LatitudeFormatter()\nax2.xaxis.set_major_formatter(lon_formatter)\nax2.yaxis.set_major_formatter(lat_formatter)\n\nfc = res.polyfit_coefficients.sel(degree=1).plot(ax=ax2, cmap=plt.cm.RdBu_r, extend='both', add_colorbar=False)\nax2.set_title('Linear trend (i.e. slope) from 1950-2050 at each gridpoint')\n\ncax1 = fig.add_axes([0.73, 0.235, 0.02, 0.25])\ncbar = fig.colorbar(fc, cax=cax1, extend='both')\n","key":"om4buNR5HE"},{"type":"output","id":"ZS2-3BPfxkzrjWRXvjog7","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 2400x2000 with 3 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"6f9422785e5702bee97c45fd88c2126b","path":"/CFC-extreme-weather-cookbook/build/6f9422785e5702bee97c45fd88c2126b.png"}}}],"key":"IDoLFaZ4mD"}],"key":"LdQxU2XWjS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Environmental changes by experiment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rfGiUy7Fff"}],"identifier":"environmental-changes-by-experiment","label":"Environmental changes by experiment","html_id":"environmental-changes-by-experiment","implicit":true,"key":"Lhi4sPpHlz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here, we look at the simulated 500-hPa omega (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yHYU3Ojtyx"},{"type":"inlineMath","value":"\\omega500","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mn>500</mn></mrow><annotation encoding=\"application/x-tex\">\\omega500</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord\">500</span></span></span></span>","key":"opYhqBpfv0"},{"type":"text","value":") fields for the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kdJJMjDHX0"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"highresSST-Present","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KvdqKcKWsY"}],"key":"fMqjUdwylr"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SoFBq1yQKR"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"highresSST-Future","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"T70UTRDPOs"}],"key":"NgYzvKg18K"},{"type":"text","value":". The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sBN7t7TteZ"},{"type":"inlineMath","value":"\\omega500","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mn>500</mn></mrow><annotation encoding=\"application/x-tex\">\\omega500</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mord\">500</span></span></span></span>","key":"kOQ1BRcN91"},{"type":"text","value":" variable is a useful indicator for examining where extreme convection tends to occur.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dDDOt8DOX8"}],"key":"bYlpziXsK2"}],"key":"nJKklGnKCb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Subset our data to only look at months August-October\nda1_env = dsPRES.wap.sel(time=dsPRES.time.dt.month.isin([8,9,10]), plev=500*100).mean('time')*1e2\nda2_env = dsFUT.wap.sel(time=dsFUT.time.dt.month.isin([8,9,10]), plev=500*100).mean('time')*1e2\n\ndifference = da2_env - da1_env\n\nfig = plt.figure(figsize=(12,10), dpi=200)\n\nax = fig.add_subplot(3, 1, 1, projection=ccrs.PlateCarree())\nax.set_extent([-100, -50, 10, 30], crs=ccrs.PlateCarree())\nax.add_feature(cfeature.LAND, zorder=2, facecolor='None', edgecolor='black')\n\nax.set_xticks(np.arange(-100, -50, 20), crs=ccrs.PlateCarree())\nax.set_yticks(np.arange(10, 40, 10), crs=ccrs.PlateCarree())\nlon_formatter = LongitudeFormatter(zero_direction_label=True)\nlat_formatter = LatitudeFormatter()\nax.xaxis.set_major_formatter(lon_formatter)\nax.yaxis.set_major_formatter(lat_formatter)\n\nfc = da1_env.plot(levels=np.arange(-5, 5.5, 0.5), cmap=plt.cm.RdGy_r, extend='both', add_colorbar=False, ax=ax)\nax.set_title(r\"$\\omega500$; highresSST-Present: 1950-2014\")\n\ncbar = plt.colorbar(fc, orientation='vertical', ax=ax)\ncbar.ax.tick_params(labelsize=16)\ncbar.ax.set_title(r'Pa s$^{-1}$')\n\nax = fig.add_subplot(3, 1, 2, projection=ccrs.PlateCarree())\nax.set_extent([-100, -50, 10, 30], crs=ccrs.PlateCarree())\nax.add_feature(cfeature.LAND, zorder=2, facecolor='None', edgecolor='black')\n\nax.set_xticks(np.arange(-100, -50, 20), crs=ccrs.PlateCarree())\nax.set_yticks(np.arange(10, 40, 10), crs=ccrs.PlateCarree())\nlon_formatter = LongitudeFormatter(zero_direction_label=True)\nlat_formatter = LatitudeFormatter()\nax.xaxis.set_major_formatter(lon_formatter)\nax.yaxis.set_major_formatter(lat_formatter)\n\nfc = da2_env.plot(levels=np.arange(-5, 5.5, 0.5), cmap=plt.cm.RdGy_r, extend='both', add_colorbar=False, ax=ax)\nax.set_title(r\"$\\omega500$:highresSST-Future: 2015-2050\")\n\ncbar = plt.colorbar(fc, orientation='vertical', ax=ax)\ncbar.ax.tick_params(labelsize=16)\ncbar.ax.set_title(r'Pa s$^{-1}$')\n        \nax = fig.add_subplot(3, 1, 3, projection=ccrs.PlateCarree())\nax.set_extent([-100, -50, 10, 30], crs=ccrs.PlateCarree())\nax.add_feature(cfeature.LAND, zorder=2, facecolor='None', edgecolor='black')\n\nax.set_xticks(np.arange(-100, -50, 20), crs=ccrs.PlateCarree())\nax.set_yticks(np.arange(10, 40, 10), crs=ccrs.PlateCarree())\nlon_formatter = LongitudeFormatter(zero_direction_label=True)\nlat_formatter = LatitudeFormatter()\nax.xaxis.set_major_formatter(lon_formatter)\nax.yaxis.set_major_formatter(lat_formatter)\n\nfc = difference.plot(levels=np.arange(-3, 3.2, 0.2), cmap=plt.cm.RdBu_r, extend='both', add_colorbar=False, ax=ax)\nax.set_title(r\"$\\omega500$:highresSST-Future - highresSST-Present\")\n\ncbar = plt.colorbar(fc, orientation='vertical', ax=ax)\ncbar.ax.tick_params(labelsize=16)\ncbar.ax.set_title(r'Pa s$^{-1}$')\n\nplt.subplots_adjust(hspace=0.4)","key":"rq0BGnZKis"},{"type":"output","id":"51bOQQOE4YQ8HFw40OV7z","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 2400x2000 with 6 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"1923fc6744b37aedea5c4ae468625356","path":"/CFC-extreme-weather-cookbook/build/1923fc6744b37aedea5c4ae468625356.png"}}}],"key":"OeZwTggXxH"}],"key":"Q5apu62AAE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculating genesis potential","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ms5p5fdeBI"}],"identifier":"calculating-genesis-potential","label":"Calculating genesis potential","html_id":"calculating-genesis-potential","implicit":true,"key":"iYLTiObpYg"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here, we’ll do something a little different. We’ll retrieve some more data above to calculate what is known as genesis potential for the Caribbean region. Genesis potential is an indicator of how favorable","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gnZLOFbEH3"}],"key":"rFtTPSYwI7"}],"key":"XHWGGo79ru"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"CleELWbfHv"},{"type":"output","id":"GAdVll7UNAg0lLsSw8zf1","data":[],"key":"yjRvztTHlJ"}],"key":"tEcjQ7uY9b"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"client.close()","key":"NK442hzG5V"},{"type":"output","id":"erRNOSOXAS_lHiELunVV_","data":[],"key":"Vehv3MVdeU"}],"key":"ADycKgjkgU"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"m0p97H2O88"}],"key":"Epdx4n3Tgr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pBC8QXiECY"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"QaxJwHTJx4"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In the above workflow, we examine environmental changes in the CMIP6 HighResMIP simulations and calculate changes in GPI, an indicator of tropical cyclone activity for the Caribbean region.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bG3t7DRkLf"}],"key":"g9vaZeOPvg"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"AJYjoK70k8"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"TCbAO1DhrF"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In the next book, we examine how El Niño Southern Oscillation (ENSO) variability is a key factor in this regional-scale variability and trends.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"LzgCIL4Cxu"}],"key":"a9WwtPn5Sb"}],"key":"E6b4Wv6hxq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and references","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S9ROX0J0OU"}],"identifier":"resources-and-references","label":"Resources and references","html_id":"resources-and-references","implicit":true,"key":"G7IpwSZw0h"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Finally, be rigorous in your citations and references as necessary. Give credit where credit is due. Also, feel free to link to relevant external material, further reading, documentation, etc. Then you’re done! Give yourself a quick review, a high five, and send us a pull request. A few final notes:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bYf8Zx16pS"}],"key":"PcwXT5Mscc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"Kernel > Restart Kernel and Run All Cells...","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mAD1jRCC9n"},{"type":"text","value":" to confirm that your notebook will cleanly run from start to finish","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XCp7h68CaR"}],"key":"p6n1Tyf6vY"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"Kernel > Restart Kernel and Clear All Outputs...","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FgCRHRtXiI"},{"type":"text","value":" before committing your notebook, our machines will do the heavy lifting","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"bb9f0tsS5k"}],"key":"EGX7Usgu8B"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Take credit! Provide author contact information if you’d like; if so, consider adding information here at the bottom of your notebook","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MhtXjMYKyF"}],"key":"yqgbusaum7"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Give credit! Attribute appropriate authorship for referenced code, information, images, etc.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yEm3h7QLip"}],"key":"NweByKE4iN"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Only include what you’re legally allowed: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"p5oTMtoVyf"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"no copyright infringement or plagiarism","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"p4QS1eKJxU"}],"key":"jMfkCuKIwN"}],"key":"KWHpSZlCVH"}],"key":"X5Zp1lheHa"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Thank you for your contribution!","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JoYZ7SVoRL"}],"key":"bW7un1WdcL"}],"key":"B50EXjk5sF"}],"key":"sLlLTu6TGi"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Extreme SSTs","url":"/notebooks/cfc-ocean","group":"Notebook Gallery"}}},"domain":"http://localhost:3000"}